\documentclass[../../../main.tex]{subfiles}
\begin{document}
\subsection{Motivation}
Il arrive régulièrement d'utiliser des constantes d'état lors de l'écriture de programmes. La valeur réelle de ces constantes importe souvent peu. Il faut simplement que chacune soit unique. Par exemple, les codes d'erreurs de fonctions peuvent requérir de tels constantes d'états. 
Il faut pouvoir donner un symbole à chaque constante pour qu'un programmeur tiers puisse lire le programme.

On imaginer un programme qui effectue une requête HTTP\footnote{J'aime les chats : \url{https://http.cat/}} par exemple :

\begin{minipage}{0.5\textwidth}
\begin{minted}{c}
int c = requete();
switch (c) {
	case 200:
		...
		break;
	case 408:
		...
		break;
	default:
		printf("Code inconnu\n");
		break;
}
\end{minted}
\end{minipage}
\begin{minipage}{0.5\textwidth}
\begin{minted}{c}
enum HttpsCode c = requete();
switch (code) {
	case E_OK:
		...
		break;
	case E_TIMEOUT:
		...
		break;
	default:
		printf("Code inconnu\n");
}
\end{minted}
\end{minipage}

À gauche, c'est illisible à moins de connaître par coeur tous les codes, tandis qu'à droite, la compréhension du code est aisée.
\subsection{Syntaxe}
Le mot-clé \mintinline{c}{enum} permet de déclarer des énumérations.

\begin{minted}{c}
enum HttpsCode {
	E_CONTINUE = 100,
	E_SWITCHING_PROTOCOLS, // = 101, incrémente de 1 depuis la dernière valeur explicite
	E_PROCESSING, // = 102
	E_EARLY_HINTS, // = 103
	E_OK = 200,
	E_CREATED, // = 201
	// etc...
};
\end{minted}
\textbf{Remarque :} Une constante définie par une énumération est systèmatiquement un \mintinline{c}{int}

\begin{minitelbasicbox}{\textit{Compile time} vs \textit{Running time}}
Comme les \textsf{DEFINE}, les énumérations sont remplacés dans le code à la compilation. La différence principale tient au fait que les énumérations ne permettent pas de définir autre chose que des entiers (voir section \ref{sec:directives_de_pr_processeurs_2_}).

Comme les énumérations sont définies et calculés au moment de la compilation du programme, il est impossible durant l'exécution du programme d'étendre une énumération. 
\end{minitelbasicbox}
L'intérêt des énumérations vis-à-vis des \textsf{define} tient surtout à l'incrémentation automatique et à la lisibilité du code, ce qui est \textit{très} important. On pourrait s'en passer et n'utiliser que des \textsf{define}, bien qu'un lecteur tiers ait moins d'informations. Ce n'est pas conseillé.
\end{document}